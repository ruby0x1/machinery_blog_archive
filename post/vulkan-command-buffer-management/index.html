











<!DOCTYPE html>
<html lang="en">

<head>

<script type="text/javascript" src="../../_static/js/bundle-playback.js@v=KTqwAcYd" charset="utf-8"></script>

<script type="text/javascript">
  
  

</script>
<link rel="stylesheet" type="text/css" href="../../_static/css/banner-styles.css@v=fantwOh2.css" />
<link rel="stylesheet" type="text/css" href="../../_static/css/iconochive.css@v=qtvMKcIJ.css" />
<!-- End Wayback Rewrite JS Include -->

  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/manifest.json">
  <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="../../images/favicon.ico">
  <link rel="apple-touch-icon" href="../../images/apple-touch-icon.png"/>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="Managing command buffers in the Vulkan API."/>
  

  
  <meta name="twitter:card" content="summary_large_image"/>
  
  
  <meta name="twitter:image" content="../../images/machinery-logo.png"/>
  
  <meta name="twitter:title" content="Vulkan: Command Buffer Management">
  <meta name="twitter:description" content="Managing command buffers in the Vulkan API."/>
  
  <meta name="twitter:site" content="@ourmachinery"/>

  
  <meta property="og:title" content="Vulkan: Command Buffer Management · Our Machinery"/>
  <meta property="og:site_name" content="Our Machinery"/>
  <meta property="og:url" content=" ../../post/vulkan-command-buffer-management/"/>
  
  <meta property="og:image" content="../../images/machinery-logo.png"/>
  
  
  <meta property="og:description" content="Managing command buffers in the Vulkan API."/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content=" 2017-11-20T00:00:00Z"/>
  

  <title>Vulkan: Command Buffer Management &middot; Our Machinery</title>

  

  
  
  <link type="text/css" rel="stylesheet" href="../../css/bootstrap.min.css" integrity="" print"/>
  <link type="text/css" rel="stylesheet" href="../../css/style.min.css" integrity="" print"/>
  

  
  
  <link href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/index.xml" rel="alternate" type="application/rss+xml" title="Our Machinery"/>
  

  <link rel="canonical" href="index.html"/>

  
  
  <script>

      
    
    

  </script>
  

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>

  
  <link rel="stylesheet" href="../../cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
  <script src="../../cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  
  
  <script type="text/javascript" src="../../js/bootstrap.bundle.min.js" integrity=""></script>
  <script type="text/javascript" src="../../js/page.min.js" integrity=""></script>
  
  
  








<script type="application/ld+json">
{
    "@context": "http://web.archive.org/web/20210804181432/https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "url":"http:\/\/web.archive.org\/web\/20210804181432\/https:\/\/ourmachinery.com\/",
        "email":"ping@ourmachinery.com",
        "image": {
            "@type": "ImageObject",
            "url": "/images/full-logo.png"
        },
        "name":"Our Machinery",
        "description":""
    },
    "author": {
        "@type": "Person",
        "name": "Tobias Persson",
        "email": "ping@ourmachinery.com",
        
        "website":"http:\/\/web.archive.org\/web\/20210804181432\/https:\/\/ourmachinery.com\/"
        
        
        
    },
    "headline": "Vulkan: Command Buffer Management",
    "name": "Vulkan: Command Buffer Management",
    "wordCount":  1172 ,
    "timeRequired": "PT6M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": "en"
    },
    "url": " ../../post/vulkan-command-buffer-management/",
    "datePublished": "2017-11-20T00:00Z",
    "dateModified": "2017-11-20T00:00Z",
    
    
    "description": "Managing command buffers in the Vulkan API."
}
    </script>


</head>
<body class="d-flex flex-column min-vh-100">
       <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="../../">
          <img src="../../images/full-logo.png" alt="Our Machinery Logo" width="250" height="75">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar" aria-controls="sidebar-1" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="d-none d-lg-block" id="navbarCollapse">
          <ul class="navbar-nav  ms-auto mb-2 mb-md-0 align-items-center">
            
            
            <li>
            <li class="nav-item">
               
            </li>
            </li>
            
            
            
            <li>
            <li class="nav-item">
               
            </li>
            </li>
            
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle " id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                About
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/product.html" aria-label="Link The Machinery">The Machinery</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/about.html" aria-label="Link About Us">About Us</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/press.html" aria-label="Link Press Kit">Press Kit</a>
                </li>
                
              </ul>
            </li>
            
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle " id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Learning &amp; Support
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/apidoc/apidoc.html" aria-label="Link API Documentation" target="_blank">API Documentation</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/tutorials/" aria-label="Link Tutorials">Tutorials</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/videos.html" aria-label="Link Videos">Videos</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/samples.html" aria-label="Link Sample Projects">Sample Projects</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804181432/https://github.com/OurMachinery/themachinery-public/issues" aria-label="Link Issue Tracker" target="_blank">Issue Tracker</a>
                </li>
                
              </ul>
            </li>
            
            
            
             
            
            
            
            <li class="nav-item dropdown" style="height:40px;min-width:58px;">
              <a class="text-yellow fs-1 signed-in-only" style="line-height: 1;" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <ion-icon name="person-circle-outline"></ion-icon>
              </a>
              <a class="text-yellow fs-1 signed-out-only" style="line-height: 1;" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <ion-icon name="log-in-outline"></ion-icon>
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item signed-out-only d-flex align-items-center" href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/sign-in.html">Sign In <ion-icon class="ms-auto" name="log-in-outline"></ion-icon></a></li>
                <li><a class="dropdown-item signed-out-only d-flex align-items-center" href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/sign-up.html">Sign Up <ion-icon class="ms-auto" name="create-outline"></ion-icon></a></li>
                <li><a class="dropdown-item signed-in-only d-flex align-items-center" href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/profile.html">Profile <ion-icon class="ms-auto" name="person-outline"></ion-icon></a></li>
                <li><a class="dropdown-item signed-in-only d-flex align-items-center" role="button" onclick="signOut(); return false;">Sign Out <ion-icon class="ms-auto" name="log-out-outline"></ion-icon></a></li>
              </ul>
            </li>
            
          </ul>
        </div>
      </div>


      <div id="sidebar" tabindex="-1" role="dialog" aria-modal="false" class="b-sidebar b-sidebar-right collapse shadow bg-dark text-light vh-100">
        <header class="b-sidebar-header">
          <button type="button" aria-label="Close" class="fs-1 btn btn-default text-light float-start" data-bs-toggle="collapse" data-bs-target="#sidebar" aria-controls="sidebar-1" aria-expanded="false" aria-label="Toggle navigation">
          <span class="icon icon-close"></span>
        </button>
        <div class=" d-flex justify-content-center">
        <a href="../../"><img src="../../images/full-logo.png" class="om-logo p-2 mb-2 mt-2" alt="Our Machinery Logo" width="100" height="75"></a>
  </div>
      </header>
          <div class="b-sidebar-body overflow-auto">
            <div class="card text-primary">
              
              <div class="card-body d-flex justify-content-center signed-out-only">
                <a href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/sign-in.html" aria-label="Login" class="btn btn-outline-primary me-2" style="flex: 1;"><span class="icon icon-user align-middle"></span> <span class="align-middle text-uppercase font-monospace">Sign In</span></a>
                <a href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/sign-up.html" aria-label="Register Account" class="btn btn-outline-primary" style="flex: 1;"><span class="icon icon-edit align-middle"></span> <span class="align-middle text-uppercase font-monospace">Sign Up</span></a>
              </div>
              
              <div class="card-body d-flex justify-content-center signed-in-only">
                <a href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/profile.html" aria-label="Open Profile" class="btn btn-outline-primary me-2 d-flex" style="max-height: 56; min-height: 56px;"><span class="align-middle align-self-center text-uppercase font-monospace">Profile</span></a>
                <a onclick="signOut(); return false;" class="btn btn-outline-primary  d-flex" style="max-height: 56; min-height: 56px;"><span class="icon icon-lock align-middle align-self-center"></span> <span class="align-middle align-self-center text-uppercase font-monospace">Logout</span></a>
              </div>
            </div>
            <div class="accordion mt-0" id="accordion-menu">
              
              
              
              
              
              
                <div class="accordion-item  bg-light">
                  <h2 class="accordion-header" id="heading-id2">
                    <button class="accordion-button bg-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-id2" aria-expanded="false" aria-controls="#collapse-id2">
                      About
                    </button>
                  </h2>
                  <div id="collapse-id2" class="accordion-collapse collapse" aria-labelledby="heading-id2" data-bs-parent="#accordion-menu">
                    <div class="accordion-body p-0">
                      <div class="list-group border-0">
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/product.html">The Machinery</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/about.html">About Us</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/press.html">Press Kit</a>
                        
                      </div>
                    </div>
                  </div>
                </div>
                
              
              
                <div class="accordion-item  bg-light">
                  <h2 class="accordion-header" id="heading-id3">
                    <button class="accordion-button bg-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-id3" aria-expanded="false" aria-controls="#collapse-id3">
                      Learning &amp; Support
                    </button>
                  </h2>
                  <div id="collapse-id3" class="accordion-collapse collapse" aria-labelledby="heading-id3" data-bs-parent="#accordion-menu">
                    <div class="accordion-body p-0">
                      <div class="list-group border-0">
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/apidoc/apidoc.html">API Documentation</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/tutorials/">Tutorials</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/videos.html">Videos</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/samples.html">Sample Projects</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://github.com/OurMachinery/themachinery-public/issues">Issue Tracker</a>
                        
                      </div>
                    </div>
                  </div>
                </div>
                
              
              
                <div class="accordion-item  bg-light">
                  <h2 class="accordion-header" id="heading-id4">
                    <button class="accordion-button bg-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-id4" aria-expanded="false" aria-controls="#collapse-id4">
                      Community
                    </button>
                  </h2>
                  <div id="collapse-id4" class="accordion-collapse collapse" aria-labelledby="heading-id4" data-bs-parent="#accordion-menu">
                    <div class="accordion-body p-0">
                      <div class="list-group border-0">
                        
                          <a class="list-group-item list-group-item-action border-0 " href=" ../../post/">Blog</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://discord.gg/SHHSZaH">Discord</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://github.com/OurMachinery/themachinery-public/discussions">Forum</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804181432/https://anchor.fm/ourmachinery">Podcast</a>
                        
                      </div>
                    </div>
                  </div>
                </div>
                
              
            </div>
    </div>
  
    <footer class="b-sidebar-footer w-100">
      <div class="d-flex flex-row">
        <a href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/tutorials/" aria-label="Opens Tutorial" type="button" class="btn btn-outline-light m-1" style="flex: 1"> <span class="align-middle text-uppercase font-monospace">Tutorials</span></a>
        <a href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/apidoc/apidoc.html" aria-label="Opens API Documentation" type="button" class="btn btn-outline-light m-1" style="flex: 1"> <span class="align-middle text-uppercase font-monospace">Documentation</span></a>
    </div>

    
 

 
  </footer>
  
    </div>

    </nav>
  <main>


<section class="mt-5 container">

  <article class="post">
    <header class="post-blog mx-auto">
      <div class="mb-5 clearfix" role="group" aria-label="Basic example">
          <a href=" ../../" type="button" class="btn btn-primary float-start">
            <ion-icon name="chevron-back-outline" class="align-middle" style="padding-right:0.2em"></ion-icon> <span class="align-middle">All Blogs</span>
          </a>
          <div class="float-end">
          
           
        </div>
        </div>
      </div>

      <div class="d-grid d-md-flex gap-2 pb-3 pb-md-0 mb-2">
        <div class="flex-grow-1">
          <h1>Vulkan: Command Buffer Management</h1>
        </div>
      </div>

      <p>
        <time class="post-date" datetime=" 2017-11-20T00:00:00Z">
          Nov 20, 2017
        </time>
      </p>



    </header>

    <section class="text-break post-blog mx-auto">
      <p>Let’s pick up where we <a href=" ../../post/vulkan-descriptor-sets-management/">left off</a> of a few weeks ago and continue to discuss some of the performance critical parts of our Vulkan render backend. Today’s topic is management of command buffers and we’ll kick off with a quick overview of the user’s responsibilities when when working with command buffers in Vulkan.</p>
<p>In Vulkan any work to be conducted by the GPU is first recorded into command buffers ( <code>vkCommandBuffer</code>) that are submitted for execution using <code>vkQueueSubmit()</code>. Command buffers are allocated from command pools (<code>VkCommandPool</code>). Pools are responsible for backing the command buffers with memory and are <em>externally synchronized</em>, meaning that it is the API user who is responsible to make sure that there are no concurrent accesses to a pool from multiple threads. This also applies when recording into command buffers coming from the same pool as they will request more memory from the pool when they need to grow.</p>
<p>When one or many command buffers are submitted for execution the API user has to guarantee to not free the command buffers, or any of the resources referenced in the command buffers, before they have been fully consumed by the GPU.</p>
<p>Practically, what this means is that each worker thread needs its own <code>VkCommandPool</code> to allocate command buffers from. What it also means is that we must carefully schedule destruction / recycling of command buffers and any resources referenced therein to not happen before the command buffers have been fully consumed by the GPU. When submitting command buffers for execution we can ask Vulkan to signal a <code>VkFence</code> when all the command buffers associated with the submit have been consumed, when the fence is signaled we know it’s safe to recycle or destroy any referenced resources as well as the buffers themselves.</p>
<p>In Vulkan there are two types of command buffers: <em>Primary</em> and S<em>econdary.</em>  As this post isn’t intended to be a tutorial on Vulkan I won’t cover the difference between them in any detail, but the basic idea is that you will be using primary buffers to coordinate bigger state changes (like switching between render passes) and secondary **command buffers will be used in your worker threads when generating lots of draw calls within a render pass. Secondary command buffers are then scheduled for execution by calling them from primary command buffers using <code>vkCmdExecuteCommands()</code>.</p>
<p>To manage this in our Vulkan render backend we use a simple FIFO queue. For every <code>vkQueueSubmit</code> we write an arbitrary length command to the queue with a header that looks like this:</p>
<pre><code>typedef struct command_buffers_header_o
{    
    // Which queue (graphics, compute, transfer) that this submit targets
    uint32_t queue;
    // Complete semaphore to (optionally) signal
    VkSemaphore complete_semaphore;
    // Fence to be signaled by Vulkan when the buffers have been fully consumed
    VkFence complete_fence;
    // Number of primary command buffers following this header
    uint32_t num_primary_buffers;
    // Number of secondary command buffers following this header
    uint32_t num_secondary_buffers;
    // Number of descriptor pools following this header
    uint32_t num_descriptor_pools;
    // Number of delete messages following this header
    uint32_t num_queued_deletes;
} command_buffers_header_o;
</code></pre>
<p>Immediately following the command header we pack the data associated with the command, so in memory the full command looks like this:</p>
<pre><code>{
  [command_buffers_header_o]
  [num_primary_buffers * VkCommandBuffer]
  [num_secondary_buffers * VkCommandBuffer]
  [num_descriptor_pools * VkDescriptorPool]
  [num_queued_deletes * queued_resource_delete_t]
}
</code></pre>
<p>The length of the final command depends on context. As described in <a href=" ../../post/a-modern-rendering-architecture/">“A Modern Rendering Architecture”</a> we build two types of graphics API agnostic command buffers on the engine side; one that deals with creation, update and destruction of render backend resources, and another that describes actual work to be done by the render backend. So depending on what type of API agnostic command buffers we are currently processing and how much work they contain, the length of the command put on the FIFO queue will differ.</p>
<p>The <code>queued_resource_delete_t</code> is just a container that references one or many Vulkan resources of a specific type, queued for destruction:</p>
<pre><code>typedef enum delete_resource_type {
    RESOURCE_BUFFER,
    RESOURCE_IMAGE,
    RESOURCE_IMAGE_VIEW,
    RESOURCE_IMAGE_VIEWS,
    RESOURCE_SAMPLER,
    RESOURCE_MEMORY,
    RESOURCE_SHADER_MODULE
} delete_resource_type;

typedef struct queued_resource_delete_t
{
    delete_resource_type type;
    void *resource;
} queued_resource_delete_t;
</code></pre>
<p>Each frame we peek at the tail of the FIFO queue to determine if the <code>VkEvent</code> in the <code>command_buffers_header_o</code> has been reached. If so, we free any Vulkan resources in the <code>queued_resource_delete_t</code> array and recycle all primary and secondary <code>VkCommandBuffers</code> as well as all <code>VkDescriptorPools</code>. The recycling is done by simply copying their handles to designated recycle-arrays within each physical device:</p>
<pre><code>/* carray */ VkCommandBuffer *free_primary_command_buffers[QUEUE_MAX];
VkCommandPool worker_thread_command_pools[MAX_WORKER_THREADS][QUEUE_MAX];
/* carray */ VkCommandBuffer *free_secondary_command_buffers[MAX_WORKER_THREADS][QUEUE_MAX];
/* carray */ VkDescriptorPool *free_descriptor_pools;
</code></pre>
<p>Note: The <code>/* carray */</code> comment in the code above indicates that the pointers points to our implementation of Sean Barrett&rsquo;s <a href="http://web.archive.org/web/20210804181432/https://github.com/nothings/stb/blob/master/stretchy_buffer.h">&ldquo;Stretchy Buffer&rdquo;</a>.</p>
<p>We then continue advancing the tail until the queue is either empty or we reach a <code>VkFence</code> that hasn’t yet been signaled.</p>
<p>Currently we reset descriptor pools (<code>vkResetDescriptorPool</code>) and command buffers (<code>vkResetCommandBuffer</code>) on first use. Maybe it would be better to do that when we recycle them instead, as that potentially would give more freedom to Vulkan to manage its memory more efficiently. I don’t know. Neither do I know if it is better to return the <code>VkCommandBuffers</code> to their respective pools instead of resetting them. As with a lot of things in Vulkan, there are not that many best-practice guidelines available, and things like this are also likely to be IHV-dependent.</p>
<p>The FIFO queue allocates its memory for the commands in blocks of 64KB. Each time we want to put a new command on the queue we iterate through any blocks already allocated (and that we consider being worth scanning, i.e where the amount of free space is above a certain threshold). The first block we find that has enough free space to hold our command we’ll grab. If we can’t find an existing block, we’ll allocate a new one and put the command in that instead.</p>
<p>A good alternative to the FIFO queue would be to use a ring-buffer for this instead. My main argument for not using a ring-buffer is that we expect <em>The Machinery</em> to be used for a lot of different applications with very different content workloads, in which case tweaking the size of the ring-buffer to avoid stalls can be a bit annoying. Also worth noting is that we don’t expect to see a lot of pressure on this queue as there’s typically a rather low number of <code>vkQueueSubmit()</code> happening every frame, so performance isn’t too critical. With that said it’s not unlikely I will revisit this in the future.</p>
<p>So far I haven’t looked at adding support for pre-recorded secondary command buffers that can be reused across multiple frames. But from what I can tell it should be fairly trivial to support by simply treating them as regular backend resources (similar to images, buffers, sampler, etc) and keeping them completely outside of this system.</p>
<p>That’s it. If you have comments, suggestions or questions feel free to reach out to me on twitter <a href="http://web.archive.org/web/20210804181432/https://twitter.com/tobias_persson">@tobias_persson</a> or similar. In my next post we’ll take a look at how we manage <code>VkPipelines</code> when running heavily parallel.</p>
      


<section>
  <h5>by <a href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/authors/tobias" class="text-decoration-none">Tobias Persson</a></h5>
</section>


    </section>
    <footer class="mt-5 mb-5">
      <hr>

      <div class="d-flex">
    <div class="me-auto">
        <a href=" ../../post" type="button" class="btn btn-primary">
            <ion-icon name="chevron-back-outline" class="align-middle" style="padding-right:0.2em"></ion-icon> <span class="align-middle">All Blogs</span>
        </a>
    </div>
    
    <a class="icon icon-twitter me-1" style="font-size: 1.2em" href="http://web.archive.org/web/20210804181432/https://twitter.com/share?text=Vulkan%3a%20Command%20Buffer%20Management - Our%20Machinery&amp;url=https%3a%2f%2fourmachinery.com%2fpost%2fvulkan-command-buffer-management%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon icon-pinterest me-1" style="font-size: 1.2em" href="http://web.archive.org/web/20210804181432/https://pinterest.com/pin/create/button/?url=https%3a%2f%2fourmachinery.com%2fpost%2fvulkan-command-buffer-management%2f&amp;description=Vulkan%3a%20Command%20Buffer%20Management" onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
        <span class="hidden">Pinterest</span>
    </a>
    
</div>

      <div class="mt-5">
        

<p>The comment system uses a session cookie to keep track of your signed-in status. This cookie is
created when you sign in with GitHub. If you don't sign in, no cookie is created.</p>




      </div>

      
      <div class="container mb-5 mt-5">
        <div class="row">
          <h3>Previous Posts</h3>
          <hr>
        </div>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
          
              <div class="col">
              <div class="card om-post-preview shadow-sm">
                
                <a href=" ../../post/virtual-memory-tricks/" class="text-decoration-none"><img src="../../images/virtual-memory-fragmentation.png" class="card-img-top" alt="Virtual Memory Tricks"></a>
                
                <div class="card-body">
                  <h5 class="card-title"><a class="text-decoration-none" href=" ../../post/virtual-memory-tricks/">Virtual Memory Tricks</a></h5>
                  <h6 class="card-subtitle mb-2 text-muted">
                    <time class="post-date" datetime=" 2017-11-06T00:00:00Z">
                      6 Nov 2017
                    </time>
                  </h6>
                  <p class="card-text"><p>I’ve been planning for some time to make a post about things you can do with <a href="http://web.archive.org/web/20210804181432/https://en.wikipedia.org/wiki/Virtual_memory">virtual memory</a>, so when <a href="http://web.archive.org/web/20210804181432/https://twitter.com/jimsagevid">@jimsagevid</a> <a href="http://web.archive.org/web/20210804181432/https://twitter.com/jimsagevid/status/920351713529344003">tweeted …</a></p></p>
                </div>
                <div class="d-flex justify-content-between align-items-center p-2">
                  <div class="btn-group">
                    <a href=" ../../post/virtual-memory-tricks/" type="button" class="btn btn-lg btn-outline-primary">Read</a>
                  </div>
                  <small class="text-muted">17 min</small>
                </div>
              </div>
        </div>
         <div class="col">
              <div class="card om-post-preview shadow-sm">
                
                <div class="card-body">
                  <h5 class="card-title"><a class="text-decoration-none" href=" ../../post/vulkan-descriptor-sets-management/">Vulkan: Descriptor Sets Management</a></h5>
                  <h6 class="card-subtitle mb-2 text-muted">
                    <time class="post-date" datetime=" 2017-10-30T00:00:00Z">
                      30 Oct 2017
                    </time>
                  </h6>
                  <p class="card-text"><p>I could easily spend an entire post just writing about my love-hate-relationship with Vulkan. Over the last six months …</p></p>
                </div>
                <div class="d-flex justify-content-between align-items-center p-2">
                  <div class="btn-group">
                    <a href=" ../../post/vulkan-descriptor-sets-management/" type="button" class="btn btn-lg btn-outline-primary">Read</a>
                  </div>
                  <small class="text-muted">7 min</small>
                </div>
              </div>
        </div>
         <div class="col">
              <div class="card om-post-preview shadow-sm">
                
                <div class="card-body">
                  <h5 class="card-title"><a class="text-decoration-none" href=" ../../post/marketing-miniseries-part-2-user-groups-and-user-conferences/">Marketing Miniseries: Part 2 User Groups and User Conferences</a></h5>
                  <h6 class="card-subtitle mb-2 text-muted">
                    <time class="post-date" datetime=" 2017-10-24T00:00:00Z">
                      24 Oct 2017
                    </time>
                  </h6>
                  <p class="card-text"><p>To continue on our marketing miniseries of blog posts, I wanted to touch briefly on user group meetups and conferences. …</p></p>
                </div>
                <div class="d-flex justify-content-between align-items-center p-2">
                  <div class="btn-group">
                    <a href=" ../../post/marketing-miniseries-part-2-user-groups-and-user-conferences/" type="button" class="btn btn-lg btn-outline-primary">Read</a>
                  </div>
                  <small class="text-muted">3 min</small>
                </div>
              </div>
        </div>
        
      </div>
      </div>
    </footer>
  </article>

</section>

</main>

<footer class="container-fluid mt-auto page-footer-bg">
    <div class="mx-auto d-flex justify-content-center w-100 pt-5 pb-5">
        <img alt="trees" src=" ../../post/vulkan-command-buffer-management/&#32;https:/ourmachinery.com/images/trees.png" style="height: 84.38px; width: 150px;">
    </div>
    <div class="page-info">
        <p class="float-end">
            
            <a href="http://web.archive.org/web/20210804181432/https://twitter.com/ourmachinery" target="_blank" class="icon icon-twitter fs-4"></a>
            
            <a href="http://web.archive.org/web/20210804181432/https://instagram.com/ourmachinery" target="_blank" class="icon icon-instagram fs-4"></a>
            
            <a href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/index.xml" target="_blank" class="icon icon-feed fs-4"></a>
            
            <a href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/cdn-cgi/l/email-protection#94e4fdfaf3d4fbe1e6f9f5f7fcfdfaf1e6edbaf7fbf9" target="_blank" class="icon icon-mail fs-4"></a>
            
        </p>
        <p>&copy; Our Machinery 2021 <a style="text-decoration:none; margin-left:1em;" href="http://web.archive.org/web/20210804181432/https://ourmachinery.com/privacy.html">Privacy Policy</a></p>
    </div>
</footer>

<script type="module" src="../../unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule="" src="../../unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.js"></script>
</body>

</html><!--
     FILE ARCHIVED ON 18:14:32 Aug 04, 2021 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 00:53:17 Aug 01, 2022.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 84.019
  exclusion.robots: 0.105
  exclusion.robots.policy: 0.098
  cdx.remote: 0.066
  esindex: 0.009
  LoadShardBlock: 59.746 (3)
  PetaboxLoader3.datanode: 64.522 (4)
  CDXLines.iter: 12.616 (3)
  load_resource: 208.847
  PetaboxLoader3.resolve: 29.161
-->